You are an expert Python backend engineer.  
Generate production-grade Flask backend code for a project named **Weather Visualizer**.

Constraints:
- Only 1 file: `app.py`.
- Use Flask, Flask-CORS, requests, and environment variables.
- Required features:
  1. Get current weather by city/location
  2. Get 7-day forecast
  3. Store/retrieve user preferences
  4. Provide random â€œdaily weather fun factâ€
  5. Suggest activities based on weather
  6. Return Spotify playlists matched to weather (using Spotify API Client Credentials Flow)
  7. Return soothing background sound URLs mapped to weather condition
  8. location of the user should be taken automatically
______________________________________________________________________________

    ğŸŒ¤ï¸ Core Weather Features
    1.	Current weather by automatic location detection.
    2.	7-day forecast with optional hourly breakdown.
    3.	Wind speed, humidity, UV index, rain/snow probability.
    4.	Severe weather alerts (storm, tornado, flood) integration.
    5.	Multi-unit support (Â°C/Â°F, km/h/mph).
    6.	Location search (city, coordinates) fallback.
    7.	Historical weather data retrieval (past 7â€“30 days).
______________________________________________________________________________
    ğŸ‘¤ User Personalization
    8.	Save/retrieve user preferences (favorite locations, units, themes) using PostgreSQL.
    9.	Profile-based weather moods (â€œI love rainy daysâ€).
    10.	Daily streaks or engagement tracking.
    11.	Custom alert triggers (temp drops, rain starts, wind alert).
    12.	Personalized greetings based on time & weather.
______________________________________________________________________________
    ğŸµ Entertainment & Engagement
    13.	Weather-based Spotify playlists (Client Credentials Flow).
    14.	Soothing background sounds mapped to weather conditions.
    15.	Daily weather fun fact or tip.
    16.	Weather-based activity suggestions.
    17.	Random global city weather feed (â€œExplore Weatherâ€).
______________________________________________________________________________
    ğŸ“¡ Integrations & API Features
    18.	OpenWeather API integration (current, forecast, alerts).
    19.	Spotify API (Client Credentials Flow).
    20.	Push notifications for weather alerts & personal triggers (Firebase or OneSignal).
    21.	Optional Cloudinary integration for user-uploaded weather photos.
    22.	Geo-location API for automatic location detection.
    23.	Weather-based journaling or logging feature stored in PostgreSQL.
    24.	Travel or event recommendations based on forecast.
    25.	Integration with calendar or to-do apps for weather-aware planning.
    26.	Personalized home screen widgets for quick glance.
______________________________________________________________________________
    ğŸ”” Notifications & Alerts
    27.	Instant mobile/weather push notifications via Firebase/OneSignal.
    28.	Set personal alert triggers (e.g., temperature drops below 15Â°C, rain starts, wind alert).
    29.	Emergency alert system integration (weather.gov / OpenWeather alerts).
______________________________________________________________________________
    ğŸ’» Developer & Deployment Features
    30.	Single-file Flask backend for simplicity (app.py).
    31.	Flask-CORS support for frontend integration.
    32.	Environment variables for all API keys.
    33.	PostgreSQL support via SQLAlchemy for user preferences, logs, alerts.
    34.	Rate-limiting to prevent abuse.
    35.	Scalable architecture for Render deployment.
    36.	Easy endpoint structure for frontend consumption.

- Spotify API:
  - Use environment variables for `SPOTIFY_CLIENT_ID` and `SPOTIFY_CLIENT_SECRET`.
  - Authenticate using Client Credentials Flow.
  - Map weather conditions â†’ playlists (Sunny â†’ Happy Vibes, Rain â†’ Lo-Fi Beats, Snow â†’ Cozy Winter, etc.).
- Soothing Sounds:
  - Map weather conditions â†’ audio URLs (Sunny â†’ birds.mp3, Rainy â†’ rain.mp3, Snow â†’ fireplace.mp3, Storm â†’ thunder.mp3).
- Scalable for Render deployment.



ğŸŒ¤ï¸ Weather Visualizer â€“ Project Overview
â€œNot just a weather app â€” a daily experience.â€
________________________________________
ğŸ“Œ Summary
Weather Visualizer is a modern, interactive weather application designed to deliver an immersive experience beyond simple temperature data. With real-time animated weather backgrounds, personalized user interaction, and global coverage, the app turns weather-checking into a fun, engaging, and addictive daily habit.
________________________________________
ğŸ¯ Purpose
The goal is to create a weather app that users enjoy visiting every day â€” not just for information, but for interaction, inspiration, and even entertainment. Weather Visualizer becomes a lifestyle companion that feels personal, playful, and smart.
________________________________________
ğŸŒ Tech Stack
Frontend	Backend	API Integration	Hosting
ReactJS (w/ CSS Animations)	Flask	OpenWeather API	Frontend: Vercel <br> Backend: Render
Tailwind / Material UI	Flask-CORS	Optional: Cloudinary (photos), Firebase (push)	
Framer Motion / GSAP	SQLAlchemy (for user prefs)		
________________________________________
ğŸ–¼ï¸ Key Features
ğŸŒˆ User Interface (UI)
â€¢	Vibrant animated backgrounds for sun, rain, snow, wind
â€¢	Clean and minimal design with bold weather info
â€¢	Personal greetings like "Good Morning, Srinath!"
â€¢	Dark mode & theme customization
â€¢	Swipable hourly/weekly forecasts
ğŸŒŸ User Engagement
â€¢	Daily weather fun facts, records, or inspiration
â€¢	Gamified streaks â€“ earn badges by checking daily!
â€¢	Custom alerts (e.g., â€œRain in 30 mins!â€)
â€¢	Activity suggestions based on local weather
ğŸ“¡ Core Weather Features
â€¢	Current weather with animated effects
â€¢	Hourly & 7-day forecast
â€¢	Wind speed, humidity, UV, and rain chance
â€¢	Live radar through interactive map
â€¢	Global location search
ğŸ¥ Visual & Social Add-ons
â€¢	Upload and view user-submitted weather photos
â€¢	â€œExplore Weatherâ€ â€“ fun updates from random global cities
â€¢	Create personalized "Weather Mood" playlists
________________________________________
ğŸŒ Global Coverage
â€¢	Supports multi-language UI: English, Hindi, Telugu
â€¢	Location-specific messaging:
â€¢	Monsoon alerts (India)
â€¢	Tornado alerts (U.S.)
â€¢	Snowstorm notifications (Europe)
â€¢	Mix of real-time local and global feeds
________________________________________
ğŸ› ï¸ Customization
â€¢	Set preferred weather units (Â°C/Â°F, km/h/mph)
â€¢	Save favorite locations
â€¢	Customize home screen widgets
â€¢	Choose background themes (sunsets, clouds, night sky, etc.)
â€¢	Profile-based preferences like: â€œI love rainy daysâ€
________________________________________
ğŸ”” Notifications & Alerts
â€¢	Instant mobile/weather push notifications
â€¢	Set personal alert triggers (e.g., temp drops below 15Â°C)
â€¢	Emergency alert system integration (weather.gov / OpenWeather alerts)
________________________________________
âœ… Hosting
Component	Platform	Purpose
ğŸ“¦ Frontend	Vercel
Fast, scalable static hosting + CI/CD
ğŸ§  Backend	Render
Flask API serving weather data & preferences
ğŸŒ¤ï¸ Weather API	OpenWeather
Real-time and forecast weather data
________________________________________
ğŸ“ˆ Growth Opportunities
â€¢	Weather-based journaling
â€¢	Travel recommendation system based on current weather
â€¢	Social feed of user weather clips/photos
________________________________________
ğŸ§© Possible Integrations
â€¢	Spotify API for weather-matched playlists
â€¢	Google Calendar / To-Do integration for weather-based task planning
â€¢	Apple/Android widget support
â€¢	Progressive Web App (PWA) support for installable experience
________________________________________
ğŸ”“ Open Source Goals
This project can serve as:
â€¢	A beautiful full-stack template
â€¢	A beginner-friendly Open Weather API starter kit
â€¢	An ideal project for frontend/backend portfolio
â€¢	A scalable mobile app idea (convert to React Native)
________________________________________
ğŸ“· UI Preview (optional section for later)
â€¢	Screenshot of rainy/sunny UI
â€¢	GIF of background animation
â€¢	Forecast swipe animation demo